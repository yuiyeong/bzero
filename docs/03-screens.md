# B0 화면 명세서

이 문서는 B0 MVP의 모든 화면 구조와 상세 스펙을 정의합니다.

---

## 1. 네비게이션 플로우

### 1.1 전체 플로우

```
┌─────────────────────────────────────────────────────────────────┐
│                         온보딩 흐름 (2단계 인증)                    │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  [온보딩 스토리 1] → [온보딩 스토리 2] → [온보딩 스토리 3]            │
│                                            ↓                    │
│                                   [로그인/회원가입 선택]            │
│                                      ↙         ↘                │
│                               [로그인]        [회원가입]           │
│                                  ↓         (Supabase Auth)      │
│                                  ↓               ↓              │
│                                  ↓        [프로필 설정]           │
│                                  ↓     (닉네임/이모지 입력)        │
│                                  ↓               ↓              │
│                                  └───────┬───────┘              │
│                                          ↓                      │
│                                    [B0 터미널]                    │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────┐
│                         여행 흐름                                │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  [B0 터미널] → [도시 카드 선택] → [비행선 티켓 구매]                  │
│                                         ↓                       │
│                               [티켓 화면 (카운트다운)]              │
│                                         ↓                       │
│                              [게스트하우스 거실]                    │
│                              ↙     ↓      ↘                     │
│                      [사랑방]  [라운지]  [개인숙소]                  │
│                         ↓        ↓       ↙    ↘                 │
│                    [단체채팅] [1:1채팅] [일기] [문답지]              │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────┐
│                        체크아웃 흐름                              │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  [게스트하우스] → [연장하기 클릭] → [연장 확인 모달]                  │
│                         ↓                    ↓                  │
│              [체크아웃 1시간 전 알림]     [연장 완료]                │
│                         ↓                                       │
│               [자동 체크아웃] → [B0 터미널]                         │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

## 2. 화면 목록

| # | 화면명 | 경로 | 설명 |
|---|--------|------|------|
| 1 | 온보딩 스토리 | `/onboarding` | 3장의 스토리 슬라이드 |
| 2 | 로그인/회원가입 선택 | `/auth` | 인증 선택 화면 |
| 3 | 회원가입 | `/auth/signup` | 이메일/비밀번호 (Supabase) |
| 4 | 프로필 설정 | `/auth/profile` | 닉네임/이모지 (Backend) |
| 5 | 로그인 | `/auth/login` | 로그인 폼 |
| 6 | B0 터미널 | `/` | 홈, 도시 선택 |
| 7 | 비행선 티켓 구매 | `/ticket/:cityId` | 티켓 구매 |
| 8 | 티켓 화면 | `/ticket/:ticketId/waiting` | 카운트다운 대기 |
| 9 | 게스트하우스 거실 | `/guesthouse/:cityId` | 게스트하우스 메인 |
| 10 | 사랑방 | `/guesthouse/:cityId/sarangbang` | 단체 채팅 |
| 11 | 라운지 | `/guesthouse/:cityId/lounge` | 여행자 목록 |
| 12 | 1:1 채팅 | `/chat/:chatId` | 개인 대화 |
| 13 | 개인 숙소 | `/guesthouse/:cityId/room` | 개인 공간 |
| 14 | 일기 작성 | `/guesthouse/:cityId/room/diary` | 일기 쓰기 |
| 15 | 문답지 작성 | `/guesthouse/:cityId/room/questionnaire` | 문답지 |
| 16 | 일기 리스트 | `/diary` | 작성한 일기 목록 |
| 17 | 일기 상세 | `/diary/:diaryId` | 일기 상세 내용 |
| 18 | 문답지 리스트 | `/questionnaire` | 작성한 문답지 목록 |
| 19 | 문답지 상세 | `/questionnaire/:questionnaireId` | 문답지 상세 내용 |
| 20 | 프로필 모달 | (모달) | 프로필 정보 및 설정 |
| 21 | 연장 확인 모달 | (모달) | 체류 연장 확인 |
| 22 | 체크아웃 알림 | (토스트/배너) | 체크아웃 안내 |

---

## 3. 화면별 상세 명세

### 3.1 온보딩 스토리 (`/onboarding`)

#### 레이아웃
```
┌────────────────────────────┐
│                            │
│                            │
│      [풀스크린 배경 이미지]    │
│                            │
│                            │
│  ─────────────────────────  │ ← 하단 그라데이션 오버레이
│                            │
│     "어느 날 밤, 당신은      │
│      의문의 핸드폰을         │
│       발견했습니다"          │
│                            │
│         ○ ○ ○              │ ← 페이지 인디케이터
│                            │
│      [시작하기] (3번째만)     │
│                            │
└────────────────────────────┘
```

#### 스토리 내용

| 슬라이드 | 배경 이미지 | 텍스트 |
|----------|------------|--------|
| 1 | 어두운 방, 침대 | "어느 날 밤, 당신은 의문의 핸드폰을 발견했습니다" |
| 2 | 핸드폰 화면 클로즈업 | "화면에는 'B0'이라는 이상한 앱이 설치되어 있습니다" |
| 3 | 비행선 터미널 (보라-핑크 노을) | "B0 - 존재하지 않는 층, 숨겨진 비행선 터미널로의 초대" |

#### 인터랙션
- 좌우 스와이프로 슬라이드 이동
- 마지막 슬라이드에서 "시작하기" 버튼 표시
- "시작하기" 클릭 → 로그인/회원가입 선택 화면

#### 컴포넌트
- `OnboardingSlide`: 풀스크린 배경 + 텍스트
- `PageIndicator`: 3개 점 (현재 페이지 강조)
- `Button` (Primary): 시작하기

---

### 3.2 로그인/회원가입 선택 (`/auth`)

#### 레이아웃
```
┌────────────────────────────┐
│                            │
│                            │
│                            │
│           [B0 로고]         │
│                            │
│    "당신 마음이 잠시         │
│        쉬어갈 곳"           │
│                            │
│                            │
│                            │
│       [회원가입 버튼]        │ ← Primary
│                            │
│  "이미 계정이 있으신가요?    │
│         로그인"             │ ← Ghost 링크
│                            │
└────────────────────────────┘
```

#### 컴포넌트
- `Logo`: B0 로고 (중앙)
- `Text`: 태그라인
- `Button` (Primary): 회원가입
- `Button` (Ghost): 로그인 링크

---

### 3.3 회원가입 (`/auth/signup`)

> **2단계 인증 - Step 1**: Supabase Auth로 이메일/비밀번호 계정 생성

#### 레이아웃
```
┌────────────────────────────┐
│ ← 뒤로     회원가입          │ ← 헤더 (56px)
├────────────────────────────┤
│                            │
│  이메일                     │
│  ┌──────────────────────┐  │
│  │ example@email.com    │  │
│  └──────────────────────┘  │
│  ✓ 사용 가능한 이메일입니다   │ ← 실시간 검증
│                            │
│  비밀번호                    │
│  ┌──────────────────────┐  │
│  │ ••••••••             │  │
│  └──────────────────────┘  │
│  8자 이상 입력해주세요        │
│                            │
│  비밀번호 확인               │
│  ┌──────────────────────┐  │
│  │ ••••••••             │  │
│  └──────────────────────┘  │
│                            │
│                            │
│        [다음 버튼]          │ ← Primary (하단 고정)
│                            │
└────────────────────────────┘
```

#### 인증 아키텍처

```
┌─────────────┐      ┌─────────────┐      ┌─────────────┐
│  Frontend   │ ───► │  Supabase   │      │  Backend    │
│  (React)    │      │  Auth       │      │  (FastAPI)  │
└─────────────┘      └─────────────┘      └─────────────┘
      │                    │                     │
      │  1. signUp()       │                     │
      │ ─────────────────► │                     │
      │                    │                     │
      │  2. JWT 토큰 반환   │                     │
      │ ◄───────────────── │                     │
      │                    │                     │
      │                    │     (Step 2에서)    │
      │                    │  3. POST /users/me  │
      │ ───────────────────┼────────────────────►│
      │                    │                     │
```

#### 입력 필드 검증

| 필드 | 검증 규칙 | 에러 메시지 | 처리 주체 |
|------|----------|------------|----------|
| 이메일 | 이메일 형식, 중복 확인 | "올바른 이메일 형식이 아니에요" / "이미 사용 중인 이메일이에요" | Supabase |
| 비밀번호 | 8자 이상 | "8자 이상 입력해주세요" | Supabase |
| 비밀번호 확인 | 비밀번호와 일치 | "비밀번호가 일치하지 않아요" | Frontend |

#### 상태
- **기본**: 빈 폼
- **입력 중**: 실시간 유효성 검사 피드백
- **에러**: 빨간 테두리 + 에러 메시지 (Supabase 에러 변환)
- **로딩**: 버튼 로딩 상태
- **완료**: 프로필 설정 화면(`/auth/profile`)으로 이동

#### API 호출

```typescript
// Supabase Auth SDK 사용
const { data, error } = await supabase.auth.signUp({
  email: email,
  password: password,
});

// 성공 시 자동으로 JWT 토큰 저장됨
// 프로필 설정 화면으로 이동
navigate('/auth/profile');
```

---

### 3.4 프로필 설정 (`/auth/profile`)

> **2단계 인증 - Step 2**: Backend API로 닉네임/이모지 설정 및 사용자 생성

#### 레이아웃
```
┌────────────────────────────┐
│         프로필 설정          │ ← 헤더 (뒤로가기 없음)
├────────────────────────────┤
│                            │
│    "B0에서 사용할 프로필을     │
│       설정해 주세요"         │
│                            │
│  닉네임                     │
│  ┌──────────────────────┐  │
│  │ 여행자                 │  │
│  └──────────────────────┘  │
│  2-10자로 입력해주세요       │
│                            │
│  프로필 이모지               │
│  ┌──────────────────────┐  │
│  │ 😊 😎 🌟 🌈 🎈       │  │
│  │ 🌙 ✨ 🍀 🎭 🦋       │  │
│  │ 🌊 🔥 💎 🎯 🚀       │  │
│  └──────────────────────┘  │
│                            │
│                            │
│       [시작하기 버튼]        │ ← Primary (하단 고정)
│                            │
└────────────────────────────┘
```

#### 입력 필드 검증

| 필드 | 검증 규칙 | 에러 메시지 | 처리 주체 |
|------|----------|------------|----------|
| 닉네임 | 2-10자, 중복 확인 | "2-10자로 입력해주세요" / "이미 사용 중인 닉네임이에요" | Backend |
| 이모지 | 필수 선택 | "프로필 이모지를 선택해주세요" | Frontend |

#### 상태
- **기본**: 빈 폼
- **입력 중**: 실시간 유효성 검사 피드백
- **에러**: 빨간 테두리 + 에러 메시지
- **로딩**: 버튼 로딩 상태
- **완료**: "B0에 오신 것을 환영합니다! 1000포인트를 받았어요" 토스트 → B0 터미널

#### API 호출

```typescript
// Backend API 호출 (JWT 토큰 자동 포함)
const response = await fetch('/api/v1/users/me', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    'Authorization': `Bearer ${supabase.auth.session()?.access_token}`,
  },
  body: JSON.stringify({
    nickname: nickname,
    profile: selectedEmoji,
  }),
});

// 성공 시 1000P 지급 + B0 터미널로 이동
// Backend에서 User + UserIdentity 생성 + 포인트 지급 처리
```

#### 특수 케이스: 기존 사용자 로그인 후 온보딩 미완료

로그인 시 Backend API(`GET /users/me`)에서 사용자가 없거나 닉네임이 null이면:
- 자동으로 프로필 설정 화면으로 리다이렉트
- 온보딩 완료 후 B0 터미널 접근 가능

---

### 3.5 로그인 (`/auth/login`)

> Supabase Auth로 로그인 후 Backend에서 온보딩 상태 확인

#### 레이아웃
```
┌────────────────────────────┐
│ ← 뒤로      로그인          │
├────────────────────────────┤
│                            │
│  이메일                     │
│  ┌──────────────────────┐  │
│  │                      │  │
│  └──────────────────────┘  │
│                            │
│  비밀번호                    │
│  ┌──────────────────────┐  │
│  │                      │  │
│  └──────────────────────┘  │
│                            │
│                            │
│                            │
│        [로그인 버튼]         │
│                            │
└────────────────────────────┘
```

#### 상태
- **기본**: 빈 폼
- **에러**: "이메일 또는 비밀번호가 올바르지 않아요"
- **완료**: 온보딩 상태에 따라 분기
  - 온보딩 완료 → B0 터미널로 이동
  - 온보딩 미완료 → 프로필 설정으로 이동

#### 로그인 플로우

```typescript
// 1. Supabase Auth 로그인
const { data, error } = await supabase.auth.signInWithPassword({
  email: email,
  password: password,
});

if (error) {
  // 에러 표시
  return;
}

// 2. Backend에서 사용자 정보 확인
const response = await fetch('/api/v1/users/me', {
  headers: {
    'Authorization': `Bearer ${data.session.access_token}`,
  },
});

if (response.status === 404) {
  // 사용자 없음 → 프로필 설정으로 이동
  navigate('/auth/profile');
  return;
}

const user = await response.json();

if (!user.nickname) {
  // 닉네임 없음 → 프로필 설정으로 이동
  navigate('/auth/profile');
  return;
}

// 3. 온보딩 완료 → B0 터미널로 이동
navigate('/');
```

---

### 3.6 B0 터미널 - 홈 (`/`)

#### 레이아웃
```
┌────────────────────────────┐
│ 😊      [B0]        850P   │ ← 헤더
├────────────────────────────┤
│                            │
│   [비행선 터미널 배경 이미지]  │
│                            │
│    "어디로 떠나볼까요?"       │
│                            │
│  ┌──────────────────────┐  │
│  │  [세렌시아 배경 이미지]  │  │
│  │                      │  │
│  │  세렌시아             │  │
│  │  관계의 도시           │  │
│  │  노을빛 항구 마을에서   │  │
│  │  소중한 인연을 만나요   │  │
│  │                      │  │
│  │    [비행선 예매]       │  │
│  └──────────────────────┘  │
│                            │
│  ┌──────────────────────┐  │
│  │  [로렌시아 배경 이미지]  │  │
│  │                      │  │
│  │  로렌시아             │  │
│  │  회복의 도시           │  │
│  │  숲 속 오두막에서      │  │
│  │  지친 마음을 쉬어가요   │  │
│  │                      │  │
│  │    [비행선 예매]       │  │
│  └──────────────────────┘  │
│                            │
└────────────────────────────┘
```

#### 헤더 구성
- 좌측: 프로필 이모지 (탭 시 프로필 모달)
- 중앙: B0 로고
- 우측: 포인트 뱃지 (예: "850P")

#### 도시 카드 구성
- 배경 이미지 (도시별)
- 도시 이름 (H2)
- 테마 (Body, Light Purple)
- 한 줄 설명 (Body, Gray 300)
- "비행선 예매" 버튼 (Secondary)

#### MVP 도시 (2개)
1. **세렌시아** - 관계의 도시, 노을빛 항구 마을
2. **로렌시아** - 회복의 도시, 숲 속 오두막

---

### 3.7 비행선 티켓 구매 (`/ticket/:cityId`)

#### 레이아웃
```
┌────────────────────────────┐
│ ← 뒤로    비행선 예매        │
├────────────────────────────┤
│                            │
│  출발                       │
│  B0 비행선 터미널            │
│           ↓                │
│  도착                       │
│  세렌시아                    │
│                            │
│  ─────────────────────────  │
│                            │
│  비행선 선택                 │
│                            │
│  ┌──────────────────────┐  │
│  │ ○ 일반 비행선          │  │ ← 선택 가능
│  │   300P | 소요 3시간    │  │
│  └──────────────────────┘  │
│                            │
│  ┌──────────────────────┐  │
│  │ ● 쾌속 비행선          │  │ ← 선택됨
│  │   500P | 소요 1시간    │  │
│  └──────────────────────┘  │
│                            │
│  ─────────────────────────  │
│                            │
│  필요 포인트      500P      │
│  보유 포인트      850P      │
│  결제 후 잔액     350P      │
│                            │
│        [결제하기]           │
│                            │
└────────────────────────────┘
```

#### 상태
- **포인트 충분**: 결제 버튼 활성화
- **포인트 부족**: 버튼 비활성화 + "여행 자금이 부족해요. 일기를 쓰거나 대화해 볼까요?" 메시지

---

### 3.8 티켓 화면 (`/ticket/:ticketId/waiting`)

#### 레이아웃
```
┌────────────────────────────┐
│                            │
│    [비행선/구름 배경 이미지]   │
│                            │
│  ┌──────────────────────┐  │
│  │                      │  │
│  │     ✈️ B0-2024       │  │ ← 비행선 아이콘 + 번호
│  │                      │  │
│  │  ───────────────────  │  │
│  │                      │  │
│  │  출발    →    도착    │  │
│  │   B0         세렌시아  │  │
│  │                      │  │
│  │  ───────────────────  │  │
│  │                      │  │
│  │     도착까지          │  │
│  │                      │  │
│  │      58:42           │  │ ← 카운트다운 (분:초)
│  │                      │  │
│  └──────────────────────┘  │
│                            │
│     "곧 도착합니다..."       │
│                            │
└────────────────────────────┘
```

#### 동작
- 카운트다운이 0이 되면 자동으로 게스트하우스 거실로 이동
- 앱을 나갔다 들어와도 서버 시간 기준으로 동기화

---

### 3.9 게스트하우스 거실 (`/guesthouse/:cityId`)

#### 레이아웃
```
┌────────────────────────────┐
│                            │
│   [게스트하우스 배경 이미지]   │
│                            │
│  ┌──────────────────────┐  │
│  │ 🌅 세렌시아            │  │ ← 도시 아이콘 + 이름
│  │ 체크아웃: 내일 14:00   │  │
│  └──────────────────────┘  │
│                            │
│  "세렌시아 게스트하우스에     │
│   오신 것을 환영합니다!"     │
│                            │
│  ┌──────────────────────┐  │
│  │  💬 사랑방            │  │
│  │  다른 여행자들과 대화   │  │
│  └──────────────────────┘  │
│                            │
│  ┌──────────────────────┐  │
│  │  👥 라운지            │  │
│  │  1:1 대화 신청        │  │
│  └──────────────────────┘  │
│                            │
│  ┌──────────────────────┐  │
│  │  🛏️ 개인 숙소         │  │
│  │  일기와 문답지 작성    │  │
│  └──────────────────────┘  │
│                            │
│       [연장하기 300P]       │ ← 하단 고정
│                            │
└────────────────────────────┘
```

#### 컴포넌트
- `CityBadge`: 도시 아이콘 + 이름 + 체크아웃 시간
- `SpaceCard`: 공간 선택 카드 (사랑방, 라운지, 개인 숙소)
- `Button` (Secondary): 연장하기

---

### 3.10 사랑방 - 단체 채팅 (`/guesthouse/:cityId/sarangbang`)

#### 레이아웃
```
┌────────────────────────────┐
│ ← 뒤로   사랑방      5명 👥 │
├────────────────────────────┤
│                            │
│  😊 민수                    │
│  ┌──────────────────────┐  │
│  │ 안녕하세요! 처음 왔어요  │  │
│  └──────────────────────┘  │
│                    14:32   │
│                            │
│  ┌──────────────────────┐  │
│  │ 🎴 대화 카드           │  │ ← 카드 메시지 (특별 스타일)
│  │ "요즘 나를 웃게 한      │  │
│  │  순간은?"              │  │
│  └──────────────────────┘  │
│                    14:33   │
│                            │
│                   나의 메시지 │
│  ┌──────────────────────┐  │
│  │ 저도 반가워요~         │  │ ← 우측 정렬, 보라색
│  └──────────────────────┘  │
│                    14:34   │
│                            │
├────────────────────────────┤
│ 🎴 │ 메시지 입력...    [→] │ ← 입력 영역
└────────────────────────────┘
```

#### 대화 카드 모달
```
┌────────────────────────────┐
│                            │
│     ┌──────────────────┐   │
│     │                  │   │
│     │   🎴             │   │
│     │                  │   │
│     │  "요즘 내가       │   │
│     │   웃었던 순간은?" │   │
│     │                  │   │
│     └──────────────────┘   │
│                            │
│     [채팅방에 공유]         │
│                            │
│          [취소]            │
│                            │
└────────────────────────────┘
```

#### 제약사항
- 메시지 최대 300자
- 2초에 1회 전송 제한
- 최근 50개 메시지 로드
- 3일간 히스토리 보관

---

### 3.11 라운지 (`/guesthouse/:cityId/lounge`)

#### 레이아웃
```
┌────────────────────────────┐
│ ← 뒤로      라운지          │
├────────────────────────────┤
│                            │
│  같은 게스트하우스 여행자     │
│                            │
│  ┌──────────────────────┐  │
│  │ 😊 민수       [대화 신청] │ │
│  └──────────────────────┘  │
│                            │
│  ┌──────────────────────┐  │
│  │ 🌟 서연       [대화 신청] │ │
│  └──────────────────────┘  │
│                            │
│  ┌──────────────────────┐  │
│  │ 🎈 지훈       [대화 신청] │ │
│  └──────────────────────┘  │
│                            │
│                            │
│                            │
└────────────────────────────┘
```

#### 빈 상태
```
┌────────────────────────────┐
│                            │
│                            │
│          😴               │
│                            │
│   "아직 다른 여행자가        │
│       없어요"              │
│                            │
│                            │
└────────────────────────────┘
```

#### 대화 신청 후 상태
- **대기 중**: "민수님의 응답을 기다리는 중..." + 취소 버튼
- **수락됨**: 1:1 채팅 화면으로 이동
- **거절됨**: "다음에 다시 만나요" 토스트

---

### 3.12 1:1 채팅 (`/chat/:chatId`)

#### 레이아웃
```
┌────────────────────────────┐
│ ← 뒤로     😊 민수          │
├────────────────────────────┤
│                            │
│  ┌──────────────────────┐  │
│  │ 안녕하세요!           │  │
│  └──────────────────────┘  │
│                    14:40   │
│                            │
│                  나의 메시지 │
│  ┌──────────────────────┐  │
│  │ 반가워요~ 오늘 날씨가   │  │
│  │ 좋네요                │  │
│  └──────────────────────┘  │
│                    14:41   │
│                            │
├────────────────────────────┤
│    메시지 입력...      [→]  │
└────────────────────────────┘
```

#### 제약사항
- 메시지 최대 300자
- 체크아웃 시 대화 기록 삭제

---

### 3.13 개인 숙소 (`/guesthouse/:cityId/room`)

#### 레이아웃
```
┌────────────────────────────┐
│ ← 뒤로    개인 숙소          │
├────────────────────────────┤
│                            │
│    [1인실 인테리어 배경]      │
│                            │
│   "조용한 시간을 보내세요"    │
│                            │
│  ┌──────────────────────┐  │
│  │  📝 일기 쓰기          │  │
│  │  오늘의 일기 | 50P     │  │
│  │                      │  │
│  │  오늘 작성 가능 ○      │  │ ← 또는 "오늘 작성 완료 ✓"
│  └──────────────────────┘  │
│                            │
│  ┌──────────────────────┐  │
│  │  📋 문답지             │  │
│  │  세렌시아 문답지 | 50P  │  │
│  │                      │  │
│  │  미완료 ○             │  │ ← 또는 "완료 ✓"
│  └──────────────────────┘  │
│                            │
│                            │
└────────────────────────────┘
```

#### 인터랙션

**일기 쓰기 카드 클릭:**
- **미완료 상태** ("오늘 작성 가능 ○") → 일기 작성 페이지(`/guesthouse/:cityId/room/diary`)로 이동
- **완료 상태** ("오늘 작성 완료 ✓") → 오늘 작성한 일기 상세 페이지(`/diary/:diaryId`)로 이동 (읽기 전용)

**문답지 카드 클릭:**
- **미완료 상태** ("미완료 ○") → 문답지 작성 페이지(`/guesthouse/:cityId/room/questionnaire`)로 이동
- **완료 상태** ("완료 ✓") → 작성한 문답지 상세 페이지(`/questionnaire/:questionnaireId`)로 이동 (읽기 전용)

---

### 3.14 일기 작성 (`/guesthouse/:cityId/room/diary`)

#### 레이아웃
```
┌────────────────────────────┐
│ ← 뒤로              [저장]  │
├────────────────────────────┤
│                            │
│  2024년 12월 15일           │ ← 자동 날짜
│                            │
│  제목 (선택)                │
│  ┌──────────────────────┐  │
│  │ 오늘의 제목            │  │
│  └──────────────────────┘  │
│                            │
│  오늘의 기록                │
│  ┌──────────────────────┐  │
│  │                      │  │
│  │                      │  │
│  │                      │  │
│  │ 오늘 하루는 어떠셨나요? │  │ ← placeholder
│  │                      │  │
│  │                      │  │
│  │                      │  │
│  └──────────────────────┘  │
│                  0/500자   │
│                            │
│  오늘의 기분                │
│  ┌──────────────────────┐  │
│  │ 😊  😐  😢  😠  🥰   │  │
│  └──────────────────────┘  │
│                            │
└────────────────────────────┘
```

#### 저장 후
- "50포인트를 받았어요!" 토스트
- 개인 숙소로 복귀
- 하루 1회만 포인트 획득

---

### 3.15 문답지 작성 (`/guesthouse/:cityId/room/questionnaire`)

#### 레이아웃
```
┌────────────────────────────┐
│ ← 뒤로  세렌시아 문답지  1/3 │
├────────────────────────────┤
│                            │
│                            │
│  ┌──────────────────────┐  │
│  │                      │  │
│  │  "요즘 나에게 힘이     │  │
│  │   되어주는 사람은?"    │  │
│  │                      │  │
│  └──────────────────────┘  │
│                            │
│  ┌──────────────────────┐  │
│  │                      │  │
│  │                      │  │
│  │                      │  │
│  │                      │  │
│  └──────────────────────┘  │
│                  0/200자   │
│                            │
│                            │
│  [이전]            [다음]   │
│                            │
└────────────────────────────┘
```

#### 세렌시아 문답지 질문 (3개)
1. "요즘 나에게 힘이 되어주는 사람은?"
2. "최근에 누군가와 나눈 의미 있는 대화는?"
3. "관계에서 내가 가장 중요하게 생각하는 것은?"

#### 로렌시아 문답지 질문 (3개)
1. "요즘 나를 지치게 하는 것은?"
2. "나만의 휴식 방법이 있다면?"
3. "완전히 쉬었다고 느꼈던 때는 언제인가요?"

#### 마지막 질문 제출 후
- "50포인트를 받았어요!" 토스트
- 개인 숙소로 복귀
- 도시별 1회만 작성 가능

---

### 3.16 일기 리스트 (`/diary`)

#### 레이아웃
```
┌────────────────────────────┐
│ ← 뒤로     나의 일기         │
├────────────────────────────┤
│                            │
│  📝 내가 작성한 일기들       │
│                            │
│  ┌──────────────────────┐  │
│  │ 2024.12.15           │  │
│  │ 세렌시아에서의 첫날    │  │ ← 제목 (있으면 표시)
│  │                      │  │
│  │ 오늘 처음으로 세렌시아에│  │
│  │ 도착했다. 노을빛...    │  │ ← 미리보기 (첫 2줄)
│  │                      │  │
│  │ 세렌시아 · 🥰         │  │ ← 도시명 · 기분
│  └──────────────────────┘  │
│                            │
│  ┌──────────────────────┐  │
│  │ 2024.12.14           │  │
│  │                      │  │
│  │ 오늘은 힘든 하루였다.  │  │
│  │ 회사에서...           │  │
│  │                      │  │
│  │ 로렌시아 · 😢         │  │
│  └──────────────────────┘  │
│                            │
└────────────────────────────┘
```

#### 인터랙션
- 일기 카드 클릭 → 일기 상세 페이지로 이동
- 최신순으로 정렬 (작성일 내림차순)
- 무한 스크롤 또는 페이지네이션

#### 빈 상태
```
┌────────────────────────────┐
│                            │
│          📝               │
│                            │
│   "아직 작성한 일기가        │
│       없어요"              │
│                            │
│   "여행 중 개인 숙소에서     │
│    일기를 작성해보세요"      │
│                            │
└────────────────────────────┘
```

#### 제약사항
- 본인이 작성한 일기만 조회 가능
- 체크인한 날 작성한 일기만 표시
- 읽기 전용 (수정/삭제 불가)

---

### 3.17 일기 상세 (`/diary/:diaryId`)

#### 레이아웃
```
┌────────────────────────────┐
│ ← 뒤로      나의 일기        │
├────────────────────────────┤
│                            │
│  2024년 12월 15일           │ ← 작성일
│                            │
│  세렌시아에서의 첫날         │ ← 제목 (있으면 표시)
│                            │
│  🌅 세렌시아               │ ← 도시 아이콘 + 이름
│                            │
│  ─────────────────────────  │
│                            │
│  오늘 처음으로 세렌시아에     │
│  도착했다. 노을빛 항구의      │
│  풍경이 정말 아름다웠다.      │
│  사랑방에서 만난 사람들도     │
│  다들 따뜻했고, 민수님과      │ ← 일기 본문 (전체)
│  좋은 대화를 나눴다.         │
│                            │
│  오늘은 정말 특별한 날이었다. │
│  앞으로 더 많은 이야기를      │
│  나누고 싶다.               │
│                            │
│  ─────────────────────────  │
│                            │
│  오늘의 기분                │
│          🥰                │ ← 기분 이모지
│                            │
└────────────────────────────┘
```

#### 접근 경로
1. **프로필 모달** → "나의 일기" → 일기 리스트 → 일기 카드 클릭
2. **개인 숙소** → 일기 쓰기 카드 클릭 (완료 상태일 때)

#### 인터랙션
- 뒤로가기 → 이전 페이지로 이동 (일기 리스트 또는 개인 숙소)
- 읽기 전용 (수정/삭제 불가)

---

### 3.18 문답지 리스트 (`/questionnaire`)

#### 레이아웃
```
┌────────────────────────────┐
│ ← 뒤로    나의 문답지         │
├────────────────────────────┤
│                            │
│  📋 내가 작성한 문답지들      │
│                            │
│  ┌──────────────────────┐  │
│  │ 🌅 세렌시아            │  │
│  │ 관계의 도시             │  │
│  │                      │  │
│  │ 2024.12.15           │  │ ← 작성일
│  │                      │  │
│  │ "요즘 나에게 힘이       │  │
│  │  되어주는 사람은?"      │  │ ← 첫 번째 질문 미리보기
│  │                      │  │
│  │ 친구 민지... (더보기)   │  │ ← 답변 미리보기
│  └──────────────────────┘  │
│                            │
│  ┌──────────────────────┐  │
│  │ 🌲 로렌시아            │  │
│  │ 회복의 도시             │  │
│  │                      │  │
│  │ 2024.12.14           │  │
│  │                      │  │
│  │ "요즘 나를 지치게       │  │
│  │  하는 것은?"           │  │
│  │                      │  │
│  │ 야근과 성과... (더보기)  │  │
│  └──────────────────────┘  │
│                            │
└────────────────────────────┘
```

#### 인터랙션
- 문답지 카드 클릭 → 문답지 상세 페이지로 이동
- 최신순으로 정렬 (작성일 내림차순)
- 도시별로 그룹화 가능

#### 빈 상태
```
┌────────────────────────────┐
│                            │
│          📋               │
│                            │
│  "아직 작성한 문답지가       │
│       없어요"              │
│                            │
│  "여행 중 개인 숙소에서      │
│   문답지를 작성해보세요"     │
│                            │
└────────────────────────────┘
```

#### 제약사항
- 본인이 작성한 문답지만 조회 가능
- 체크인한 날 작성한 문답지만 표시
- 읽기 전용 (수정/삭제 불가)

---

### 3.19 문답지 상세 (`/questionnaire/:questionnaireId`)

#### 레이아웃
```
┌────────────────────────────┐
│ ← 뒤로    나의 문답지         │
├────────────────────────────┤
│                            │
│  🌅 세렌시아               │ ← 도시 아이콘 + 이름
│  관계의 도시                │
│                            │
│  2024년 12월 15일           │ ← 작성일
│                            │
│  ─────────────────────────  │
│                            │
│  질문 1/3                  │
│                            │
│  ┌──────────────────────┐  │
│  │                      │  │
│  │ "요즘 나에게 힘이      │  │
│  │  되어주는 사람은?"     │  │
│  │                      │  │
│  └──────────────────────┘  │
│                            │
│  친구 민지입니다. 힘들 때    │
│  항상 내 이야기를 들어주고   │
│  응원해줍니다.              │ ← 답변 전체
│                            │
│  ─────────────────────────  │
│                            │
│  질문 2/3                  │
│                            │
│  ┌──────────────────────┐  │
│  │                      │  │
│  │ "최근에 누군가와 나눈   │  │
│  │  의미 있는 대화는?"    │  │
│  │                      │  │
│  └──────────────────────┘  │
│                            │
│  오늘 사랑방에서 민수님과    │
│  나눈 대화가 기억에 남아요.  │
│  서로의 일상에 대해...       │
│                            │
│  ─────────────────────────  │
│                            │
│  질문 3/3                  │
│                            │
│  ┌──────────────────────┐  │
│  │                      │  │
│  │ "관계에서 내가 가장     │  │
│  │  중요하게 생각하는      │  │
│  │  것은?"               │  │
│  │                      │  │
│  └──────────────────────┘  │
│                            │
│  서로를 존중하고 진심으로    │
│  대하는 것이라고 생각합니다.  │
│                            │
└────────────────────────────┘
```

#### 접근 경로
1. **프로필 모달** → "나의 문답지" → 문답지 리스트 → 문답지 카드 클릭
2. **개인 숙소** → 문답지 카드 클릭 (완료 상태일 때)

#### 인터랙션
- 뒤로가기 → 이전 페이지로 이동 (문답지 리스트 또는 개인 숙소)
- 읽기 전용 (수정/삭제 불가)
- 3개 질문과 답변을 모두 세로로 표시

---

### 3.20 프로필 모달

#### 레이아웃
```
┌────────────────────────────┐
│                            │
│  ┌──────────────────────┐  │
│  │                      │  │
│  │        😊            │  │ ← 프로필 이모지
│  │                      │  │
│  │       민수            │  │ ← 닉네임
│  │                      │  │
│  │     850P             │  │ ← 포인트
│  │                      │  │
│  │  ───────────────────  │  │
│  │                      │  │
│  │  📝 나의 일기          │  │ ← 버튼
│  │                      │  │
│  │  📋 나의 문답지         │  │ ← 버튼
│  │                      │  │
│  │  ⚙️  설정             │  │ ← 버튼
│  │                      │  │
│  │  ───────────────────  │  │
│  │                      │  │
│  │      [닫기]           │  │
│  │                      │  │
│  └──────────────────────┘  │
│                            │
└────────────────────────────┘
```

#### 인터랙션
- 헤더의 프로필 이모지 클릭 → 모달 표시
- "나의 일기" 클릭 → 일기 리스트 페이지로 이동
- "나의 문답지" 클릭 → 문답지 리스트 페이지로 이동
- "설정" 클릭 → 설정 화면 (Phase 2)
- "닫기" 또는 외부 클릭 → 모달 닫기

---

### 3.21 연장 확인 모달

#### 레이아웃
```
┌────────────────────────────┐
│                            │
│  ┌──────────────────────┐  │
│  │                      │  │
│  │  체류를 연장하시겠어요? │  │
│  │                      │  │
│  │  필요 포인트   300P   │  │
│  │                      │  │
│  │  현재 체크아웃         │  │
│  │  12/15 14:00         │  │
│  │                      │  │
│  │  연장 후 체크아웃      │  │
│  │  12/16 14:00         │  │
│  │                      │  │
│  │  ───────────────────  │  │
│  │                      │  │
│  │  [연장하기]   [취소]   │  │
│  │                      │  │
│  └──────────────────────┘  │
│                            │
└────────────────────────────┘
```

#### 포인트 부족 시
- "여행 자금이 부족해요" 메시지
- "연장하기" 버튼 비활성화

---

### 3.22 체크아웃 알림

#### 1시간 전 알림 (배너)
```
┌────────────────────────────┐
│ ⏰ 1시간 후 체크아웃입니다   │
│                 [연장하기]  │
└────────────────────────────┘
```

#### 체크아웃 완료 (토스트)
```
┌────────────────────────────┐
│ 체크아웃되었습니다.          │
│ B0로 돌아왔어요 ✈️          │
└────────────────────────────┘
```

---

## 4. 공통 컴포넌트

### 4.1 Header

| 속성 | 값 |
|------|-----|
| 높이 | 56px |
| 배경 | transparent 또는 글래스모피즘 |
| 좌측 | 뒤로가기 아이콘 (24px) |
| 중앙 | 타이틀 (H4, 18px) |
| 우측 | 액션 버튼/텍스트 |

### 4.2 Button

| 종류 | 배경 | 텍스트 | 높이 |
|------|------|--------|------|
| Primary | #9333EA | White | 44px |
| Secondary | transparent + border | #C084FC | 44px |
| Ghost | transparent | #C084FC | auto |

### 4.3 Input

| 속성 | 값 |
|------|-----|
| 배경 | #1A1B3C |
| 테두리 | white 20% |
| 높이 | 44px |
| 모서리 | 12px |
| 포커스 | 테두리 #9333EA |

### 4.4 Card (글래스모피즘)

| 속성 | 값 |
|------|-----|
| 배경 | rgba(26, 27, 60, 0.7) |
| 블러 | 12px |
| 테두리 | white 10% |
| 모서리 | 16px |
| 패딩 | 16px |

### 4.5 Toast

| 속성 | 값 |
|------|-----|
| 위치 | 하단 중앙, bottom 24px |
| 스타일 | 글래스모피즘 |
| 모서리 | 12px |
| 자동 사라짐 | 3초 |

### 4.6 Modal

| 속성 | 값 |
|------|-----|
| 오버레이 | rgba(0, 0, 0, 0.5) |
| 카드 | 글래스모피즘 |
| 모서리 | 16px |
| 최대 너비 | 343px (375 - 32) |

### 4.7 PageIndicator

| 속성 | 값 |
|------|-----|
| 점 크기 | 8px |
| 점 간격 | 8px |
| 기본 색상 | white 30% |
| 활성 색상 | white 100% |

### 4.8 PointBadge

| 속성 | 값 |
|------|-----|
| 배경 | #1A1B3C |
| 테두리 | white 10% |
| 모서리 | 8px |
| 패딩 | 4px 8px |
| 텍스트 | 14px, Medium |

---

## 5. 상태 관리

### 5.1 전역 상태 (Zustand)

```typescript
interface AppState {
  // 사용자
  user: User | null;
  points: number;

  // 현재 위치
  currentCity: City | null;
  currentRoom: Room | null;
  checkoutTime: Date | null;

  // 티켓
  activeTicket: Ticket | null;
}
```

### 5.2 서버 상태 (React Query)

- 사용자 정보: `useUser()`
- 도시 목록: `useCities()`
- 게스트하우스 정보: `useGuesthouse(cityId)`
- 채팅 메시지: `useMessages(roomId)`
- 여행자 목록: `useTravelers(roomId)`

---

## 6. 에러 상태

### 6.1 에러 메시지 (B0 스타일)

| 상황 | 메시지 |
|------|--------|
| 네트워크 에러 | "구름이 너무 두꺼워요. 잠시 후 다시 시도해 주세요" |
| 서버 에러 | "비행선에 잠시 문제가 생겼어요. 곧 다시 출발할게요" |
| 404 | "앗, 길을 잃었어요. 터미널로 돌아갈까요?" |
| 입력 에러 | "탑승권을 받을 주소를 확인해 주세요" |
| 포인트 부족 | "여행 자금이 부족해요. 일기를 쓰거나 대화해 볼까요?" |
| 빈 상태 | "아직 여행 기록이 없어요. 첫 여정을 시작해 볼까요?" |

### 6.2 로딩 상태

- 스피너: 비행선 아이콘 회전 또는 점 애니메이션
- 텍스트: "비행선이 출발 준비 중이에요"
